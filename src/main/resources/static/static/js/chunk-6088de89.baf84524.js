(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6088de89"],{4381:function(e,t,n){"use strict";n("caad"),n("d3b7"),n("2532");var r=n("4360");function a(e,t){var n=t.value,a=r["a"].getters&&r["a"].getters.roles;if(!(n&&n instanceof Array))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");if(n.length>0){var o=n,i=a.some((function(e){return o.includes(e)}));i||e.parentNode&&e.parentNode.removeChild(e)}}var o={inserted:function(e,t){a(e,t)},update:function(e,t){a(e,t)}},i=function(e){e.directive("permission",o)};window.Vue&&(window["permission"]=o,Vue.use(i)),o.install=i;t["a"]=o},6517:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return u}));var r=n("b775");function a(e){return Object(r["a"])({url:"/borrow/queryBorrowsByPage",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/borrow/deleteBorrow",method:"delete",data:e})}function i(e){return Object(r["a"])({url:"/borrow/deleteBorrows",method:"delete",data:e})}function c(e,t){return Object(r["a"])({url:"/borrow/borrowBook",method:"post",params:{userid:e,bookid:t}})}function u(e,t){return Object(r["a"])({url:"/borrow/returnBook",method:"post",params:{borrowid:e,bookid:t}})}},6724:function(e,t,n){"use strict";n("8d41");var r="@@wavesContext";function a(e,t){function n(n){var r=Object.assign({},t.value),a=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),o=a.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var i=o.getBoundingClientRect(),c=o.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":(c=document.createElement("span"),c.className="waves-ripple",c.style.height=c.style.width=Math.max(i.width,i.height)+"px",o.appendChild(c)),a.type){case"center":c.style.top=i.height/2-c.offsetHeight/2+"px",c.style.left=i.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(n.pageY-i.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(n.pageX-i.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=a.color,c.className="waves-ripple z-active",!1}}return e[r]?e[r].removeHandle=n:e[r]={removeHandle:n},n}var o={bind:function(e,t){e.addEventListener("click",a(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[r].removeHandle,!1),e.addEventListener("click",a(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[r].removeHandle,!1),e[r]=null,delete e[r]}},i=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(i)),o.install=i;t["a"]=o},"7fb1":function(e,t,n){"use strict";n("bc00")},"8d41":function(e,t,n){},"8f7b":function(e,t){},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),o=n("a691"),i=n("50c4"),c=n("7b0b"),u=n("65f0"),l=n("8418"),s=n("1dde"),d=n("ae40"),f=s("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,p=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!h},{splice:function(e,t){var n,r,s,d,f,h,v=c(this),w=i(v.length),y=a(e,w),q=arguments.length;if(0===q?n=r=0:1===q?(n=0,r=w-y):(n=q-2,r=p(m(o(t),0),w-y)),w+n-r>b)throw TypeError(g);for(s=u(v,r),d=0;d<r;d++)f=y+d,f in v&&l(s,d,v[f]);if(s.length=r,n<r){for(d=y;d<w-r;d++)f=d+r,h=d+n,f in v?v[h]=v[f]:delete v[h];for(d=w;d>w-r+n;d--)delete v[d-1]}else if(n>r)for(d=w-r;d>y;d--)f=d+r-1,h=d+n-1,f in v?v[h]=v[f]:delete v[h];for(d=0;d<n;d++)v[d+y]=arguments[d+2];return v.length=w-r+n,s}})},bc00:function(e,t,n){},ca88:function(e,t){},cb0f:function(e,t){},de5a:function(e,t,n){"use strict";n.r(t);var r,a,o=n("5530"),i=(n("a434"),n("2f62")),c=n("4381"),u=n("6724"),l=n("6517"),s={name:"Bookinfo",directives:{waves:u["a"],permission:c["a"]},created:function(){var e=this;Object(l["d"])(this.queryParam).then((function(t){console.log("首页数据获取成功",t),e.tableData=t.data,e.recordTotal=t.count}))},methods:{handleSizeChange:function(e){var t=this,n=this.queryParam;n.limit=e,Object(l["d"])(n).then((function(e){console.log("分页数据获取成功",e),t.tableData=e.data,t.recordTotal=e.count}))},handleCurrentChange:function(e){var t=this,n=this.queryParam;n.page=e,Object(l["d"])(n).then((function(e){console.log("分页数据获取成功",e),t.tableData=e.data,t.recordTotal=e.count}))},handleFilter:function(){var e=this;this.queryParam.page=1,Object(l["d"])(this.queryParam).then((function(t){0===t.code&&(e.tableData=t.data,e.recordTotal=t.count)}))},handleShowAll:function(){var e=this;this.queryParam.page=1,this.queryParam.username=null,this.queryParam.bookname=null,Object(l["d"])(this.queryParam).then((function(t){0===t.code&&(e.tableData=t.data,e.recordTotal=t.count)}))},handleDelete:function(e,t){var n=this;this.$confirm("确定要删除该条记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["b"])(e).then((function(e){1===e?(n.$message.success("删除记录成功"),n.tableData.splice(t,1),0===n.tableData.length&&(n.queryParam.page=n.queryParam.page-1,n.handleCurrentChange(n.queryParam.page))):n.$message.error("删除记录失败")}))}))},handleDeleteSome:function(){var e=this;this.$confirm("确定要删除这些记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.$refs.multipleTable.selection;Object(l["c"])(t).then((function(t){t>0?(e.$message.success("删除"+t+"条记录成功"),e.tableData.length===t&&0!==e.queryParam.page&&(e.queryParam.page=e.queryParam.page-1),e.handleCurrentChange(e.queryParam.page)):e.$message.error("删除记录失败")}))}))},handleReturn:function(e,t){var n=this;this.$confirm("确定要还书吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["e"])(e.borrowid,e.bookid).then((function(e){1===e?(n.$message.success("还书成功"),n.handleCurrentChange(n.queryParam.page)):n.$message.error("还书失败")}))}))}},data:function(){return{tableData:[],recordTotal:0,queryParam:{page:1,limit:10,userid:null,username:null,bookname:null}}},computed:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["id","name","roles"])),{},{roleIsAdmin:function(){return"admin"===this.roles[0]}}),watch:{"queryParam.userid":{immediate:!0,handler:function(){console.log("我被触发了"),this.roleIsAdmin?this.queryParam.userid=null:this.queryParam.userid=this.id}}}},d=s,f=(n("7fb1"),n("2877")),h=n("cb0f"),m=n.n(h),p=n("fd3f"),b=n.n(p),g=n("8f7b"),v=n.n(g),w=n("ca88"),y=n.n(w),q=Object(f["a"])(d,r,a,!1,null,"c58ce38c",null);"function"===typeof m.a&&m()(q),"function"===typeof b.a&&b()(q),"function"===typeof v.a&&v()(q),"function"===typeof y.a&&y()(q);t["default"]=q.exports},fd3f:function(e,t){}}]);